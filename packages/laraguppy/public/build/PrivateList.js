const __vite__fileDeps=["app.js","app.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{u as H,a as V,j as N,s as d,r as O,H as P,k as D,o as e,c as a,f as o,w as L,F as g,l as F,p as C,i,d as n,t as c,I as j,_ as z,n as u,G,e as p}from"./app.js";const U="/vendor/laraguppy/empty-chat.svg",Z={id:"messages",class:"at-userlist_tab active"},q=["onClick"],J={key:0,class:"laraguppy-block"},K=["onLoad","src","alt"],Q={key:0,class:"at-userbar_title"},W={key:0},X={key:0},Y=n("i",{class:"laraguppy-block"},null,-1),x={key:1},f={key:2},tt=n("i",{class:"laraguppy-file-01"},null,-1),et={key:3},at=n("i",{class:"laraguppy-location"},null,-1),st={key:4},ot=n("i",{class:"laraguppy-mic"},null,-1),nt={key:5},lt=["innerHTML"],ct={class:"at-userbar_right"},it={key:0,class:"at-notify"},rt={key:1,class:"at-emptyconver"},ut=["src"],gt={__name:"PrivateList",setup(pt){const y=j(()=>z(()=>import("./app.js").then(s=>s.bZ),__vite__mapDeps([0,1]))),m=H(),v=V(),k=N(),{getTabRecord:_,loadingStatus:b,activeTab:_t,search:h}=d(m),{updateTabList:M}=m,{settings:S}=d(k),{chatInfo:$}=d(v),{getMessageTime:A}=k,{updateChatInfo:E}=v,r=O([]),T=async(s,l=!1)=>{let t={tab:"private_chat",url:"threads",loadingType:s,search:h.value,isSearching:l};await M(t)},R=P.debounce(({target:{clientHeight:s,scrollTop:l,scrollHeight:t}})=>{l+s+5>=t&&T("isScrolling")},250),w=s=>{E(s)},B=()=>"";return D(()=>{var l;(!_.value("private_chat").length||h.value)&&T("isLoading",((l=h.value)==null?void 0:l.length)>0)}),(s,l)=>(e(),a("div",Z,[o(_)("private_chat").length?(e(),a("ul",{key:0,class:"conversation-list",id:"private_thread_list",onScroll:l[0]||(l[0]=L(t=>o(R)(t),["prevent"]))},[(e(!0),a(g,null,F(o(_)("private_chat"),t=>{var I;return e(),a("li",{onClick:L(ht=>w(t),["prevent"]),key:t.threadId,class:u([{active:o($).threadId===t.threadId},"at-userbar"])},[n("figure",{class:u(["at-userbar_profile",{"at-blockuser":t.friendStatus=="blocked","at-shimmer":!r.value.includes(t.threadId)}])},[t.friendStatus=="blocked"?(e(),a("i",J)):(e(),a("span",{key:1,class:u(["at-userstatus",{online:t.isOnline,offline:!t.isOnline,"at-none":!r.value.includes(t.threadId)}])},null,2)),n("img",{onLoad:()=>r.value.push(t.threadId),class:u({"at-none":!r.value.includes(t.threadId)}),src:t.photo?t.photo:o(S).defaultAvatar?o(S).defaultAvatar:o(G),alt:t.name},null,42,K)],2),t.name?(e(),a("div",Q,[t.name?(e(),a("h3",W,c(t.name),1)):i("",!0),t.clearChat?i("",!0):(e(),a(g,{key:1},[t.deletedAt?(e(),a("span",X,[Y,p(c(s.$t("chatapp.deleted_message")),1)])):t.messageType==="text"?(e(),a("span",x,c(t.body),1)):["document","audio","video","image"].includes(t.messageType)?(e(),a("span",f,[tt,p(c(t.isSender?s.$t("chatapp.you_sent_attachment"):s.$t("chatapp.sent_you_attachment")),1)])):t.messageType==="location"?(e(),a("span",et,[at,p(c(t.isSender?s.$t("chatapp.you_sent_location"):s.$t("chatapp.sent_you_location")),1)])):t.messageType==="voice"?(e(),a("span",st,[ot,p(c(t.isSender?s.$t("chatapp.you_sent_voice_note"):s.$t("chatapp.sent_you_voice_note")),1)])):i("",!0),t.messageType==="notify"?(e(),a("span",nt,[n("span",{innerHTML:B()},null,8,lt)])):i("",!0)],64))])):i("",!0),n("div",ct,[((I=t.unSeenMessages)==null?void 0:I.length)>0?(e(),a("em",it,c(t.unSeenMessages.length>99?"99+":t.unSeenMessages.length),1)):i("",!0),n("span",null,c(o(A)(t.createdAt)),1)])],10,q)}),128)),o(b)({tab:"private_chat",loadingType:"isScrolling"})?(e(),C(o(y),{key:0,type:"innerLoading"})):i("",!0)],32)):(e(),a(g,{key:1},[o(b)({tab:"private_chat",loadingType:"isLoading"})?(e(),C(o(y),{key:0,showText:"true"})):(e(),a("div",rt,[n("img",{src:o(U)},null,8,ut),n("span",null,c(s.$t("chatapp.no_result_found")),1)]))],64))]))}};export{gt as default};
