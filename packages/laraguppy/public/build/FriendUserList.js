const __vite__fileDeps=["app.js","app.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{D as O,s as v,a as P,r as b,j as U,u as V,H,k as M,o as s,c as o,f as a,w as k,F as h,l as N,p as C,i,d as l,t as d,I as x,_ as z,n as r,G}from"./app.js";import{E as Z}from"./empty-users.js";const q={class:"at-userlist_tab active"},J=["onClick"],K={key:0,class:"laraguppy-block"},Q=["src","alt"],W={key:0,class:"at-userbar_title"},X={key:0},Y={key:0,class:"at-userbar_right"},tt=["onClick","id"],et={key:1,class:"at-userbar_right"},st=["id"],at={key:1,class:"at-emptyconver"},ot=["src"],ct={__name:"FriendUserList",setup(nt){const g=x(()=>z(()=>import("./app.js").then(e=>e.bZ),__vite__mapDeps([0,1]))),T=O(),{profileInfo:m}=v(T),$=P(),c=b(!0),B=U(),{settings:f}=v(B),y=V(),{getTabRecord:_,loadingStatus:S,search:I,activeTab:lt}=v(y),{updateTabList:E,updateFriendStatus:w}=y,{updateChatInfo:R}=$,p=b(""),u=b(!1),L=async(e,n=!1)=>{let t={tab:"friend_list",url:"friends",loadingType:e,search:I.value,isSearching:n};await E(t)},A=async e=>{p.value=e,u.value=!0,await w({userId:e,friendStatus:"active",unblock:!0}),u.value=!1},F=H.debounce(({target:{clientHeight:e,scrollTop:n,scrollHeight:t}})=>{n+e+5>=t&&L("isScrolling")},250),j=e=>{R(e)};return M(()=>{(!_.value("friend_list").length||I.value)&&L("isLoading")}),(e,n)=>(s(),o("div",q,[a(_)("friend_list").length?(s(),o("ul",{key:0,class:"conversation-list",onScroll:n[1]||(n[1]=k(t=>a(F)(t),["prevent"]))},[(s(!0),o(h,null,N(a(_)("friend_list"),t=>(s(),o("li",{onClick:k(D=>j(t),["prevent"]),class:r(["at-userbar",{"at-blocked":t.friendStatus=="blocked"&&t.blockedBy!=a(m).userId}]),key:t.userId},[l("figure",{class:r(["at-userbar_profile",{"at-shimmer":c.value,"at-blockuser":t.friendStatus=="blocked"}])},[t.friendStatus=="blocked"?(s(),o("i",K)):i("",!0),l("span",{class:r(["at-userstatus",{online:t.isOnline,offline:!t.isOnline,"at-none":c.value}])},null,2),l("img",{onLoad:n[0]||(n[0]=()=>c.value=!1),class:r({"at-none":c.value}),src:t.photo?t.photo:a(f).defaultAvatar?a(f).defaultAvatar:a(G),alt:t.name},null,42,Q)],2),t.name?(s(),o("div",W,[t.name?(s(),o("h3",X,d(t.name),1)):i("",!0)])):i("",!0),t.friendStatus=="blocked"?(s(),o(h,{key:1},[t.blockedBy==a(m).userId?(s(),o("div",Y,[l("a",{href:"javascript:void(0);",onClick:k(D=>A(t.userId),["prevent","stop"]),id:`user_${t.userId}`,class:r([{"at-disable-btn":p.value==t.userId&&u.value},"at-btn-blocked"])},d(e.$t("chatapp.unblock")),11,tt)])):(s(),o("div",et,[l("a",{href:"javascript:void(0);",id:`user_${t.userId}`,class:r([{"at-disable-btn":p.value==t.userId&&u.value},"at-btn-blocked"])},d(e.$t("chatapp.blocked")),11,st)]))],64)):i("",!0)],10,J))),128)),a(S)({tab:"friend_list",loadingType:"isScrolling"})?(s(),C(a(g),{key:0,type:"innerLoading"})):i("",!0)],32)):(s(),o(h,{key:1},[a(S)({tab:"friend_list",loadingType:"isLoading"})?(s(),C(a(g),{key:0,showText:"true"})):(s(),o("div",at,[l("img",{src:a(Z)},null,8,ot),l("span",null,d(e.$t("chatapp.no_result_found")),1)]))],64))]))}};export{ct as default};
