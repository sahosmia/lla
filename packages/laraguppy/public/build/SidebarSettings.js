import{J as ne,h as de,s as m,u as ue,D as ce,b as pe,a as he,j as ve,r as p,E as h,G as ge,O,P as _e,k as me,o as l,c as r,d as a,w as c,f as o,n as C,t as n,i as d,F as y,l as U,e as v,p as V,Q as ye,y as be,T as fe,R as z,S as G,m as ke,B as $e,M as we,N as Se}from"./app.js";import{F as Me}from"./v3.js";const Te="/vendor/laraguppy/file.jpg",E="/vendor/laraguppy/audio.jpg",je="/vendor/laraguppy/video.jpg",u=_=>(we("data-v-f9ce446d"),_=_(),Se(),_),Ce={class:"at-chat_sidebarsetting"},Ie={class:"at-chat_sidebarsetting_head"},Re=u(()=>a("i",{class:"laraguppy-multiply"},null,-1)),Ae=[Re],De={class:"at-userinfo_title_img"},Le={class:"at-userprofile_img"},Ne=["src","alt"],Fe={class:"at-chat_sidebarsettingarea"},Pe={key:0,class:"at-chat_sidebarsettingcontent"},Be={class:"at-groupdescription"},Oe={key:1,class:"at-chat_sidebarsettingcontent"},Ue=u(()=>a("i",{class:"laraguppy-volume"},null,-1)),Ve={class:"at-togglebtn"},ze=["checked"],Ge=u(()=>a("label",{for:"mute-thread"},null,-1)),Ee={key:2,class:"at-chat_sidebarsettingcontent at-chatgroup-sidebar"},Qe={class:"at-chatgroup-title"},Je={key:0,id:"memberList",class:"at-grouplist at-groupmember-list"},qe={class:"at-groupuserbar_profile"},He=["src","alt"],Ke={class:"at-groupuserbar_title"},We={key:0,class:"at-group-user-status"},Xe={key:1,class:"at-group-user-status"},Ye={href:"javascript:void()",id:"loadMore"},Ze={class:"at-chat_sidebarsettingcontent"},xe=u(()=>a("i",{class:"laraguppy-chat-delete"},null,-1)),et=u(()=>a("i",{class:"laraguppy-block"},null,-1)),tt=u(()=>a("i",{class:"laraguppy-block"},null,-1)),at={key:0,href:"javascript:void(0);",class:"at-danger","guppy-data-target":"#deletegroup"},st={key:1,href:"javascript:void(0);",class:"at-danger","guppy-data-target":"#leavegroup"},ot={key:2,href:"javascript:void(0);",class:"at-danger","guppy-data-target":"#reportchat"},lt={class:"at-gallerylistwrap"},it={key:0,class:"at-msgload"},rt=u(()=>a("i",{class:"at-spinericon"},null,-1)),nt=[rt],dt=u(()=>a("i",{class:"laraguppy-download"},null,-1)),ut={key:2,class:"at-gallerylist"},ct={class:"at-messageoption"},pt=u(()=>a("a",{href:"javascript:void(0);",class:"at-messageoption_btn"},[a("i",{class:"laraguppy-ellipsis-horizontal"})],-1)),ht={class:"at-messageoption_list"},vt={key:0},gt=["onClick"],_t=u(()=>a("i",{class:"laraguppy-activity-01"},null,-1)),mt=["onClick"],yt=u(()=>a("i",{class:"laraguppy-download"},null,-1)),bt={href:"javascript:void(0);"},ft=["src"],kt=["src"],$t=["src"],wt=["src"],St=["src"],Mt={key:0,class:"at-loadmorecontent"},Tt={key:3,class:"at-dropbox at-dropboxempty"},jt=u(()=>a("i",{class:"laraguppy-image"},null,-1)),Ct={class:"at-lightbox-container"},It={__name:"SidebarSettings",emits:["closeSidebar"],setup(_,{emit:Q}){const I=de(),{getAttachments:R,resetAttachments:J}=I,{attachmentList:b,mediaLoading:q,mediaPages:A}=m(I),H=ue(),{setThreadMuted:K}=H,W=ce(),{profileInfo:X}=m(W),Y=pe(),Z=he(),x=ve(),ee=Q,{settings:f}=m(x),k=p([]);p([]);const $=p(!1),D=p(!1),{chatInfo:t}=m(Z),{toggleModal:w}=Y,L=p(1),S=p(!1),N=p(""),te=h(()=>{var e,s,i;return((e=t.value)==null?void 0:e.threadType)=="private"?(i=(s=t.value.name)==null?void 0:s.toLowerCase())==null?void 0:i.split(" ").join("-"):""}),F=h(()=>{var e;return q.value((e=t==null?void 0:t.value)==null?void 0:e.threadId)}),P=h(()=>{var s;const{totalMediaPages:e}=A.value((s=t==null?void 0:t.value)==null?void 0:s.threadId);return e}),B=h(()=>{var s;const{mediaPage:e}=A.value((s=t==null?void 0:t.value)==null?void 0:s.threadId);return e}),M=h(()=>{var e;return(e=t==null?void 0:t.value)!=null&&e.threadId?b.value(t.value.threadId):[]}),ae=h(()=>t.value.photo?t.value.photo:f.value.defaultAvatar?f.value.defaultAvatar:ge),T=h(()=>{var e;if((e=t==null?void 0:t.value)!=null&&e.threadId){let s=b.value(t.value.threadId);return O.map(O.filter(s,i=>["image","video"].includes(i.fileType)),"file")}return[]});_e(()=>{var e;J((e=t==null?void 0:t.value)==null?void 0:e.threadId)}),me(()=>{var e;se(),R((e=t.value)==null?void 0:e.threadId,1)});const se=()=>{setTimeout(()=>{jQuery(document).find(".at-chat_sidebarsetting").addClass("at-chat_sidebarsettingopen")},0)},oe=({file:e,fileName:s})=>{G.downloadFile(e,s)},le=async()=>{var s;$.value=!0;let e=await z.downloadAttachments((s=t.value)==null?void 0:s.threadId);$.value=!1,e&&typeof e=="object"&&G.downloadFile(URL.createObjectURL(e),`${te.value}.zip`)},ie=async()=>{D.value=!0;let e=t.value.isMuted?"unmute_notifications":"mute_notifications",s=await z.postRecord(`chat-notifications/${t.value.threadId}`,{action:e,threadType:t.value.threadType});if(D.value=!1,s.type==="success"){const{threadId:i,isMuted:g,threadType:j}=t.value||{};K({threadId:i,isMuted:s.data=="mute_notifications",threadType:j})}},re=e=>{let s=T.value.findIndex(i=>i==e);s>-1&&(L.value=s+1),S.value=!S.value};return(e,s)=>(l(),r("div",Ce,[a("div",Ie,[a("a",{href:"javascript:void(0);",class:"at-closesidebar",onClick:s[0]||(s[0]=c(i=>ee("closeSidebar"),["prevent"]))},Ae)]),a("figure",De,[a("div",Le,[a("img",{src:ae.value,alt:o(t).name},null,8,Ne),a("span",{class:C(["at-userstatus",{online:o(t).isOnline,offline:!o(t).isOnline}])},null,2)]),a("figcaption",null,[a("h4",null,n(o(t).name),1)])]),a("div",Fe,[o(t).groupDetail&&o(t).groupDetail.groupDescription?(l(),r("div",Pe,[a("p",Be,n(o(t).groupDetail.groupDescription),1)])):d("",!0),!o(t).memberDisable&&Number(o(t).threadType)!="guest"?(l(),r("div",Oe,[a("h4",null,n(e.$t("chatapp.action")),1),o(t).chatType=="group"&&(N.value==1||N.value==2)&&!o(t).memberDisable?(l(),r("a",{key:0,onClick:s[1]||(s[1]=c(i=>e.editGroup(),["prevent"])),"guppy-data-target":"#creategroup",href:"javascript:void(0);"},n(e.TRANS.edit_group),1)):d("",!0),a("div",{class:C(["at-rightswitcharea",{"at-mute":o(t).isMuted}])},[Ue,a("span",null,n(e.$t("chatapp.mute")),1),a("div",Ve,[a("input",{class:"at-mute-thread",type:"checkbox",onChange:ie,checked:o(t).isMuted,id:"mute-thread"},null,40,ze),Ge])],2)])):d("",!0),o(t).threadType=="group"&&!o(t).memberDisable?(l(),r("div",Ee,[a("div",Qe,[a("h4",null,n(e.$t("chatapp.group_users")),1)]),k.value.length?(l(),r("ul",Je,[(l(!0),r(y,null,U(k.value,(i,g)=>ke((l(),r("li",{class:"at-groupuserbar at-groupuserbarvtwo",key:g+"_"+Math.floor(Math.random()*1e3)},[a("figure",qe,[a("img",{src:i.userAvatar,alt:i.userName},null,8,He)]),a("div",Ke,[a("h3",null,n(i.userName),1)]),i.groupRole===1?(l(),r("span",We,n(e.$t("chatapp.owner")),1)):i.groupRole===2?(l(),r("span",Xe,n(e.$t("chatapp.admin")),1)):d("",!0)])),[[$e,g<e.showMemberRecord]])),128)),k.value.length>=e.showMemberRecord?(l(),r("li",{key:0,class:"at-groupuserbar at-showmore",onClick:s[2]||(s[2]=c(i=>e.showMoreRec(e.showMemberRecord),["prevent"]))},[a("a",Ye,n(e.$t("chatapp.load_more")),1)])):d("",!0)])):d("",!0)])):d("",!0),a("div",Ze,[a("h4",null,n(e.$t("chatapp.privacy_settings")),1),o(f).clearChat?(l(),r("a",{key:0,href:"javascript:void(0);",onClick:s[3]||(s[3]=c(i=>o(w)("clearChat",!0),["prevent"]))},[xe,v(" "+n(e.$t("chatapp.clear_chat")),1)])):d("",!0),o(t).threadType=="private"?(l(),r(y,{key:1},[o(t).friendStatus=="blocked"&&o(t).blockedBy==o(X).userId?(l(),r("a",{key:0,onClick:s[4]||(s[4]=c(i=>o(w)("blockFriend",!0),["prevent"])),href:"javascript:void(0);",class:"at-danger"},[et,v(" "+n(o(t).friendStatus==="blocked"?e.$t("chatapp.unblock_user"):e.$t("chatapp.block_user")),1)])):o(t).friendStatus=="active"?(l(),r("a",{key:1,onClick:s[5]||(s[5]=c(i=>o(w)("blockFriend",!0),["prevent"])),href:"javascript:void(0);",class:"at-danger"},[tt,v(" "+n(e.$t("chatapp.block_user")),1)])):d("",!0)],64)):o(t).threadType=="group"?(l(),r(y,{key:2},[o(t).memberDisable?(l(),r("a",at,n(e.$t("chatapp.delete_group_txt")),1)):e.isBPGroup?d("",!0):(l(),r("a",st,n(e.$t("chatapp.leave_group_txt")),1)),e.isAllowReportOption?(l(),r("a",ot,n(e.$t("chatapp.report_group")),1)):d("",!0)],64)):d("",!0)]),a("div",lt,[a("h4",null,n(e.$t("chatapp.shared_files")),1),o(b)(o(t).threadId).length?(l(),r("a",{key:0,onClick:s[6]||(s[6]=i=>le()),href:"javascript:void(0);",class:"at-imgdownloader"},[$.value?(l(),r("span",it,nt)):d("",!0),v(" "+n(e.$t("chatapp.download_all"))+" ",1),dt])):d("",!0),F.value&&!M.value.length?(l(),V(ye,{key:1,type:"innerLoading"})):M.value.length?(l(),r("ul",ut,[(l(!0),r(y,null,U(M.value,(i,g)=>(l(),r("li",{key:g},[a("div",ct,[pt,a("ul",ht,[["image","video"].includes(i.fileType)?(l(),r("li",vt,[a("a",{href:"javascript:void(0);",onClick:c(j=>re(i.file),["prevent"])},[_t,v(" "+n(e.$t("chatapp.view")),1)],8,gt)])):d("",!0),a("li",null,[a("a",{href:"javascript:void(0);",onClick:c(j=>oe(i),["prevent"])},[yt,v(" "+n(e.$t("chatapp.download")),1)],8,mt)])])]),a("a",bt,[i.fileType==="image"?(l(),r("img",{key:0,src:i.thumbnail,alt:"attachment image"},null,8,ft)):i.fileType==="document"?(l(),r("img",{key:1,src:o(Te),alt:"attachment file"},null,8,kt)):i.fileType==="video"?(l(),r("img",{key:2,src:o(je),alt:"attachment video"},null,8,$t)):i.fileType==="audio"?(l(),r("img",{key:3,src:o(E),alt:"attachment audio"},null,8,wt)):i.fileType==="voice"?(l(),r("img",{key:4,src:o(E),alt:"attachment audio"},null,8,St)):d("",!0)])]))),128)),P.value>1&&B.value<=P.value?(l(),r("li",Mt,[a("a",{href:"javascript:void(0);",onClick:s[7]||(s[7]=c(i=>o(R)(o(t).threadId,B.value),["prevent"])),class:C([{"at-disable-btn":F.value},"at-btn"])},n(e.$t("chatapp.load_more")),3)])):d("",!0)])):(l(),r("div",Tt,[jt,a("label",null,n(e.$t("chatapp.no_attachments")),1)]))])]),v(" "+n(T.value)+" ",1),(l(),V(fe,{to:"body"},[a("div",Ct,[be(o(Me),{slide:L.value,toggler:S.value,sources:T.value,showThumbsOnMount:!0},null,8,["slide","toggler","sources"])])]))]))}},Dt=ne(It,[["__scopeId","data-v-f9ce446d"]]);export{Dt as default};
