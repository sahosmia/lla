import{j as B,h as F,s as Q,r as k,o as t,c as o,d as s,f as n,n as m,w as h,i as d,e as g,t as u,F as M,S as T}from"./app.js";const V={class:"at-messageoption"},z=s("a",{href:"javascript:void(0);",class:"at-messageoption_btn"},[s("i",{class:"laraguppy-ellipsis-horizontal"})],-1),R={class:"at-messageoption_list"},E={key:0},q={key:0,class:"laraguppy-download"},G=s("i",{class:"laraguppy-chat-reply"},null,-1),H=s("span",{class:"at-msgload"},[s("i",{class:"at-spinericon"})],-1),J={key:0,class:"laraguppy-trash"},K={key:0,class:"at-msgload"},L=s("i",{class:"at-spinericon"},null,-1),O=[L],P={key:1,class:"laraguppy-trash"},W={__name:"MessageActions",props:["message","isDownload"],setup(w){const C=B(),j=F(),S=w,{message:e,isDownload:b}=S,{threadId:v,messageId:y}=e,{downloadAttachments:$,updateReplyMsgId:D,deleteMessage:I}=j,{settings:p}=Q(C),c=k(!1),i=k(!1),N=()=>{jQuery(".at-messageoption").removeClass("at-messageoption_open"),D(v,y)},_=async()=>{i.value=!0,await I(y,v),i.value=!1,jQuery(".at-messageoption").removeClass("at-messageoption_open")},A=async()=>{var l,a,r,f;jQuery(".at-messageoption").removeClass("at-messageoption_open"),c.value=!0,(l=e.attachments)!=null&&l.length&&((a=e.attachments)==null?void 0:a.length)==1?T.downloadFile(e.attachments[0].file,e.attachments[0].fileName):(r=e.attachments)!=null&&r.length&&((f=e.attachments)==null?void 0:f.length)>1&&$(e.messageId),c.value=!1};return(l,a)=>(t(),o("div",V,[z,s("ul",R,[n(b)?(t(),o("li",E,[s("a",{href:"javascript:void(0);",class:m({"at-disable-btn":c.value}),onClick:a[0]||(a[0]=h(r=>A(),["prevent"]))},[c.value?d("",!0):(t(),o("i",q)),g(u(l.$t("chatapp.download")),1)],2)])):d("",!0),s("li",null,[s("a",{href:"javascript:void(0);",onClick:a[1]||(a[1]=r=>N())},[G,g(" "+u(l.$t("chatapp.reply_message")),1)])]),n(e).threadType=="group"?(t(),o(M,{key:1},[n(e).isSender&&l.disableDeleteMessage&&n(p)&&n(p).deleteMessage?(t(),o("li",{key:0,onClick:a[2]||(a[2]=h(r=>_(),["prevent"]))},[s("a",{href:"javascript:void(0);111",class:m({"at-disable-btn":i.value})},[H,i.value?d("",!0):(t(),o("i",J)),g(u(l.$t("chatapp.delete")),1)],2)])):d("",!0)],64)):(t(),o(M,{key:2},[n(e).isSender&&!n(e).seenAt&&n(p)&&n(p).deleteMessage?(t(),o("li",{key:0,onClick:a[3]||(a[3]=h(r=>_(),["prevent"]))},[s("a",{href:"javascript:void(0);",class:m({"at-disable-btn":i.value})},[i.value?(t(),o("span",K,O)):(t(),o("i",P)),g(" "+u(l.$t("chatapp.delete")),1)],2)])):d("",!0)],64))])]))}};export{W as default};
