import{u as B,a as j,b as I,s as C,r as $,o as u,c as g,d as t,e as M,t as n,f as s,w as _,n as y,g as R,h as F,i as k,R as T,j as Q,k as U,F as V,l as A,m as N,v as D,p as w}from"./app.js";const E={id:"blockuser",class:"at-modal at-modalopen at-fadin"},L={class:"at-modaldialog"},q={class:"at-alert"},z={class:"at-alert_btns"},G={__name:"BlockUserModal",setup(b){const c=B(),d=j(),v=I(),{chatInfo:o}=C(d),{updateFriendStatus:m}=c,{updateChatInfo:h}=d,{toggleModal:p}=v;$(!1);const i=$(!1),{emit:r}=R(),l=async()=>{let e=o.value.friendStatus=="active"?"blocked":"active";i.value=!0;let a=await m({userId:o.value.userId,friendStatus:e,unblock:e=="active"});i.value=!1,a.type=="success"&&(h(a.data),r("closeSidebar"),p("blockFriend",!1))};return(e,a)=>{var f;return u(),g("div",E,[t("div",L,[t("div",q,[t("h2",null,[M(n(s(o).friendStatus?e.$t("chatapp.unblock_user_heading",{username:s(o).name}):e.$t("chatapp.block_user_title",{username:s(o).name}))+" ",1),t("i",{onClick:a[0]||(a[0]=_(S=>s(p)("blockFriend",!1),["prevent"])),class:"at-guppy-removemodal laraguppy-multiply"})]),t("p",null,n(s(o).friendStatus?e.$t("chatapp.unblock_user_desc"):e.$t("chatapp.block_user_desc")),1),t("div",z,[t("a",{onClick:a[1]||(a[1]=_(S=>s(p)("blockFriend",!1),["prevent"])),href:"javascript:void(0);",class:"at-anchor at-guppy-removemodal"},n(e.$t("chatapp.not_right_now")),1),t("a",{href:"javascript:void(0);",onClick:a[2]||(a[2]=_(S=>l(),["prevent"])),class:y([{"at-disable-btn":i.value},"at-btn at-btn_action"])},n(((f=s(o))==null?void 0:f.friendStatus)==="blocked"?e.$t("chatapp.unblock_button"):e.$t("chatapp.block_button")),3)])])])])}}},H={id:"clearchat",class:"at-modal at-invitepopup at-modalopen at-fadin"},J={class:"at-modaldialog"},K={class:"at-alert"},O={class:"at-alert_btns"},P={key:0,class:"at-msgload"},W=t("i",{class:"at-spinericon"},null,-1),X=[W],Y={__name:"ClearChat",setup(b){const c=$(!1),{emit:d}=R(),v=I(),{toggleModal:o}=v,m=j(),{chatInfo:h}=C(m),p=F(),{clearedChat:i}=p,r=async()=>{var e,a;c.value=!0;let l=await T.postRecord("clear-chat",{threadId:(e=h.value)==null?void 0:e.threadId});c.value=!1,l.type=="success"&&(i((a=h.value)==null?void 0:a.threadId),d("closeSidebar"),o("clearChat",!1))};return(l,e)=>(u(),g("div",H,[t("div",J,[t("div",K,[t("h2",null,[M(n(l.$t("chatapp.clear_chat"))+" ",1),t("i",{onClick:e[0]||(e[0]=_(a=>s(o)("clearChat",!1),["prevent"])),class:"at-guppy-removemodal laraguppy-multiply"})]),t("p",null,n(l.$t("chatapp.clear_chat_desc")),1),t("div",O,[t("a",{href:"javascript:void(0);",onClick:e[1]||(e[1]=_(a=>s(o)("clearChat",!1),["prevent"])),class:y(["at-anchor at-guppy-removemodal",{"at-disabled":c.value}])},n(l.$t("chatapp.not_right_now")),3),t("a",{href:"javascript:void(0);",onClick:e[2]||(e[2]=_(a=>r(),["prevent"])),class:y([{"at-disabled":c.value},"at-btn at-btn_action"])},[c.value?(u(),g("span",P,X)):k("",!0),M(" "+n(l.$t("chatapp.clear_chat_button")),1)],2)])])])]))}},Z={id:"reportchat",class:"at-modal at-modalopen at-fadin"},x={class:"at-modaldialog"},tt={class:"at-alert"},et={class:"at-modal_title"},at={class:"at-themeform"},st={class:"at-form-group-wrap"},ot={class:"at-form-group"},lt={class:"at-formtitle at-important"},nt={class:"at-select at-dropdownholder"},rt={class:"at-form-control"},it={class:"at-placeholder"},ct={key:0,class:"at-dropdown"},dt=["onClick"],pt={href:"javascript:void(0);"},ut={class:"at-form-group at-explain-form"},vt={class:"at-formtitle at-important"},ht=["placeholder"],_t={class:"at-form-group"},mt={class:"at-btnlist"},ft={__name:"ReportUserModal",setup(b){const c=j(),d=Q(),v=I(),{chatInfo:o}=C(c),{settings:m}=C(d),{toggleModal:h}=v,p=$(""),i=$(!1),r=$(""),l=async()=>{i.value=!0;let e=await T.postRecord("report-user",{threadId:o.value.threadId,userId:o.value.userId,reason:r.value,description:p.value});i.value=!1,e.type=="success"&&h("report",!1)};return U(()=>{jQuery(document).on("click",".at-dropdownholder .at-form-control",function(e){jQuery(this).next().slideToggle()}),jQuery(document).on("click",".at-dropdown li",function(e){jQuery(this).closest(".at-dropdownholder").children().children("span").removeClass(),jQuery(this).closest("ul").slideUp()})}),(e,a)=>(u(),g("div",Z,[t("div",x,[t("div",tt,[t("div",et,[t("h2",null,[M(n(e.$t("chatapp.report_heading",{username:s(o).threadType=="private"||s(o).chatType=="post"?s(o).name:s(o).groupTitle}))+" ",1),t("i",{onClick:a[0]||(a[0]=_(f=>s(h)("report",!1),["prevent"])),class:"at-guppy-removemodal laraguppy-multiply"})]),t("p",null,n(e.$t("chatapp.report_desc")),1)]),t("form",at,[t("fieldset",null,[t("div",st,[t("div",ot,[t("label",lt,n(e.$t("chatapp.report_title")),1),t("div",nt,[t("div",rt,[t("span",it,n(r.value?r.value:e.$t("chatapp.report_reason")),1)]),s(m).reportingReasons?(u(),g("ul",ct,[(u(!0),g(V,null,A(s(m).reportingReasons,(f,S)=>(u(),g("li",{onClick:Mt=>r.value=f,key:S},[t("a",pt,n(f),1)],8,dt))),128))])):k("",!0)])]),t("div",ut,[t("label",vt,n(e.$t("chatapp.issue_desc")),1),N(t("textarea",{class:"at-form-control","onUpdate:modelValue":a[1]||(a[1]=f=>p.value=f),placeholder:e.$t("chatapp.add_desc")},`\r
                                `,8,ht),[[D,p.value,void 0,{trim:!0}]])]),t("div",_t,[t("ul",mt,[t("li",null,[t("a",{href:"javascript:void(0);",onClick:a[2]||(a[2]=_(f=>s(h)("report",!1),["prevent"])),class:"at-btn at-btnv2 at-guppy-removemodal"},n(e.$t("chatapp.cancel_now")),1)]),t("li",null,[t("a",{href:"javascript:void(0);",onClick:a[3]||(a[3]=_(f=>l(),["prevent"])),class:y([{"at-disable-btn":i.value},"at-btn at-btn_action"])},n(e.$t("chatapp.report_submit")),3)])])])])])])])])]))}},gt={id:"accept_invite",class:"at-modal at-invitepopup at-modalopen at-fadin"},$t={class:"at-modaldialog"},bt={class:"at-unknownuser"},kt={class:"at-alert"},yt={class:"at-alert_btns"},Ct={__name:"RespondToInvite",props:["user"],setup(b){const{user:c}=b,d=$(""),v=$(!1),o=I(),{toggleModal:m}=o,h=B(),{updateFriendReq:p}=h,i=async r=>{if(["active","declined"].includes(r)){d.value=r,v.value=!0;let l={userId:c.userId,friendStatus:r},e=await T.updateRecord("friends/update",l);v.value=!1,e.type==="success"&&(p(e.data),m("respond",!1))}};return(r,l)=>{var e;return u(),g("div",gt,[t("div",$t,[t("div",bt,[t("div",kt,[t("h2",null,[M(n((e=b.user)==null?void 0:e.name)+" ",1),t("i",{onClick:l[0]||(l[0]=_(a=>s(m)("respond",!1),["prevent"])),class:"at-guppy-removemodal laraguppy-multiply"})]),t("p",null,n(r.$t("chatapp.invitation_desc")),1),t("div",yt,[t("a",{href:"javascript:void(0);",class:y(["at-btn at-bgdanger",{"at-disable-btn":v.value&&d.value=="declined"}]),onClick:l[1]||(l[1]=_(a=>i("declined"),["prevent"]))},n(r.$t("chatapp.decline")),3),t("a",{href:"javascript:void(0);",onClick:l[2]||(l[2]=_(a=>i("active"),["prevent"])),class:y(["at-btn at-bgsuccess",{"at-disable-btn":v.value&&d.value=="active"}])},n(r.$t("chatapp.accept")),3)])])])])])}}},St={__name:"AlertModals",setup(b){const{on:c}=R(),d=$(null),v=I(),{isInviteModal:o,isBlockModal:m,isClearChatModal:h,isReportModal:p,isRespondInvite:i}=C(v);return c("respondInvite",r=>{d.value=r}),(r,l)=>(u(),g("div",null,[s(m)?(u(),w(G,{key:0})):k("",!0),s(h)?(u(),w(Y,{key:1})):k("",!0),s(p)?(u(),w(ft,{key:2})):k("",!0),s(i)?(u(),w(Ct,{key:3,user:d.value},null,8,["user"])):k("",!0)]))}};export{St as default};
