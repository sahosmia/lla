const __vite__fileDeps=["MessageActions.js","app.js","app.css","QuoteMessageList.js","v3.js","GeoMap.js","GeoMap.css","AudioPlayer.js","AudioPlayer.css","video-js.js","video-js.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{J as A,r as g,E as v,O as B,o as t,c as a,f as s,t as I,i as _,p as h,z as w,d as n,F as f,l as E,n as F,y as O,T as P,I as S,_ as T,M as $,N as x}from"./app.js";import{F as z}from"./v3.js";const D=u=>($("data-v-076d5aa8"),u=u(),x(),u),R=["id"],J={key:0},Q={key:1,class:"at-msgload"},j=D(()=>n("i",{class:"at-spinericon"},null,-1)),q=[j],G={class:"at-message_imgs"},H=["onClick"],K=["src","alt"],U={key:0},W=["onClick"],X=["src"],Y={key:0},Z={key:1,class:"at-msgload"},ee=D(()=>n("i",{class:"at-spinericon"},null,-1)),se=[ee],te={__name:"ImageMessage",props:["message"],setup(u){var M;const k=S(()=>T(()=>import("./MessageActions.js"),__vite__mapDeps([0,1,2]))),L=S(()=>T(()=>import("./QuoteMessageList.js"),__vite__mapDeps([3,4,1,2,5,6,7,8,9,10]))),e=u.message,i=g(((M=e==null?void 0:e.attachments)==null?void 0:M.length)??0),c=g(4),y=g(1),p=g(!1),C=o=>{p.value=!p.value,y.value=o},N=v(()=>{var o;return(o=e==null?void 0:e.attachments)==null?void 0:o.filter((d,l)=>l<c.value)}),V=v(()=>B.map(e==null?void 0:e.attachments,"file")),b=v(()=>{var d;let o=((d=e==null?void 0:e.attachments)==null?void 0:d.length)??0;return o<5?`at-attachment_${o}`:"at-attachment_all"});return(o,d)=>(t(),a("div",{class:"at-message at-message_gallery",id:"message_"+s(e).messageId},[!s(e).isSender&&s(e).threadType=="group"?(t(),a("h5",J,I(s(e).name),1)):_("",!0),s(e).parent&&!s(e).messageId?(t(),a("span",Q,q)):_("",!0),s(e).parent?(t(),h(s(L),{key:2,message:s(e).parent,msgId:s(e).messageId,threadId:s(e).threadId},{message_actions:w(()=>[s(e).messageId?(t(),h(s(k),{key:0,isDownload:!0,message:s(e)},null,8,["message"])):_("",!0)]),default:w(()=>{var l;return[n("ul",G,[(t(!0),a(f,null,E((l=s(e))==null?void 0:l.attachments,(r,m)=>(t(),a("li",{key:m,onClick:oe=>C(m)},[n("figure",null,[n("img",{src:r.file,alt:r.fileName},null,8,K),i.value>c.value&&m==c.value-1?(t(),a("span",U," +"+I(i.value-c.value),1)):_("",!0)])],8,H))),128))])]}),_:1},8,["message","msgId","threadId"])):(t(),a(f,{key:3},[n("ul",{class:F(["at-message_imgs",b.value])},[(t(!0),a(f,null,E(N.value,(l,r)=>(t(),a("li",{key:r+"_"+Math.floor(Math.random()*999),onClick:m=>C(r+1)},[n("figure",null,[n("img",{src:l==null?void 0:l.thumbnail,alt:"attachment image"},null,8,X),i.value>c.value&&r==c.value-1?(t(),a("span",Y," +"+I(i.value-c.value),1)):_("",!0)])],8,W))),128))],2),s(e).messageId?(t(),h(s(k),{key:0,isDownload:!0,message:s(e)},null,8,["message"])):(t(),a("span",Z,se))],64)),(t(),h(P,{to:"body"},[O(s(z),{slide:y.value,toggler:p.value,sources:V.value,showThumbsOnMount:!0},null,8,["slide","toggler","sources"])]))],8,R))}},ce=A(te,[["__scopeId","data-v-076d5aa8"]]);export{ce as default};
